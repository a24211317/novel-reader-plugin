<idea-plugin>
    <!-- 插件唯一 ID：发布到插件市场后不可随意改动 -->
    <id>com.ch.novelreader</id>

    <!-- 插件名称：在插件市场/IDE 插件列表显示 -->
    <name>Novel Reader</name>

    <!-- 版本：建议用 Gradle patchPluginXml 注入，这里也可写一个默认值 -->
    <version>1.0.0</version>

    <!-- 兼容性：建议用 patchPluginXml 注入 since/until，避免手动维护 -->
    <idea-version since-build="243" until-build="243.*"/>

    <!-- 依赖：最小依赖 platform -->
    <depends>com.intellij.modules.platform</depends>

    <!-- 供应商信息（插件市场展示） -->
    <vendor email="chenghong8682@gmail.com" >ch</vendor>

    <!-- 插件描述：插件市场展示（HTML，注意放在 CDATA 里） -->
    <description><![CDATA[
    <h2>Novel Reader（IDEA 小说阅读器）</h2>
    <p>在 IntelliJ IDEA 内的工具窗口中阅读本地 txt 小说，支持章节目录、滚轮阅读、上下自动加载相邻章节与阅读进度记忆。</p>

    <h3>主要功能</h3>
    <ul>
      <li>Tool Window 阅读区：正常滚轮上下滚动</li>
      <li>章节目录：自动识别章节标题，可显示/隐藏</li>
      <li>连续阅读：到顶持续上滚自动拼接上一章；到底持续下滚自动拼接下一章</li>
      <li>滑动窗口：只保留最近 N 章，避免越读越卡</li>
      <li>阅读进度记忆：自动记录章节 + 章节内位置</li>
      <li>设置：选择本地小说文件、设置字号</li>
    </ul>

    <h3>使用方法</h3>
    <ol>
      <li>View → Tool Windows → Novel Reader</li>
      <li>Settings/Preferences → Tools → Novel Reader</li>
      <li>选择本地 txt 文件并开始阅读</li>
    </ol>
  ]]></description>

    <!-- 更新说明：插件市场展示（HTML） -->
    <change-notes><![CDATA[
    <h3>1.0.0</h3>
    <ul>
      <li>初始发布：ToolWindow 阅读器、章节解析、上下自动加载、阅读进度记忆、设置页</li>
    </ul>
  ]]></change-notes>

    <!-- 图标：Marketplace / IDE 插件列表建议提供（见下方说明） -->
    <!-- 新版 Gradle 插件/Marketplace 推荐在 resources 里放 pluginIcon.svg / pluginIcon_dark.svg -->
    <!-- 这里不需要显式声明图标，IDE 会自动识别：resources/META-INF/pluginIcon.svg -->

    <extensions defaultExtensionNs="com.intellij">

        <!-- 1) Tool Window：左/右侧边栏出现 Novel Reader -->
        <toolWindow
                id="Novel Reader"
                anchor="right"
                factoryClass="com.example.novelreader.NovelToolWindowFactory"
                icon="/icons/book.svg"
                secondary="false"
                canCloseContents="false"/>

        <!-- 2) 设置页：Settings/Preferences → Tools → Novel Reader -->
        <applicationConfigurable
                id="com.example.novelreader.settings"
                displayName="Novel Reader"
                groupId="tools"
                instance="com.ch.novelreader.NovelReaderConfigurable"/>

        <!-- 3) 持久化状态：保存文件路径/字号/阅读位置等 -->
        <applicationService serviceImplementation="com.ch.novelreader.NovelReaderState"/>

    </extensions>

</idea-plugin>
